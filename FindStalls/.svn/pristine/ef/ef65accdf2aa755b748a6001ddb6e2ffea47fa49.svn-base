//
//  BaseInfoViewController.m
//  FindStalls
//
//  Created by lingnet on 2017/10/17.
//  Copyright © 2017年 徐仁强. All rights reserved.
//

#import "BaseInfoViewController.h"

#import "BaseInfo0Model.h"

#import "BaseInfo1Model.h"

#import "BaseInfo0TableViewCell.h"

#import "BaseInfo1TableViewCell.h"
@interface BaseInfoViewController ()<UITableViewDataSource,UITableViewDelegate,BaseInfo1TableViewCellDelegate>{
    UITableView* _tableView;
}
@property(nonatomic,strong)NSMutableArray* dataSourceArr0;
@property(nonatomic,strong)NSMutableArray* dataSourceArr1;

@end

@implementation BaseInfoViewController

#pragma mark - 返回字段代理
- (void)sendBackRightText:(NSString *)text AndSection:(NSInteger)section {
    
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    
    [self.navigationController setNavigationBarHidden:NO animated:YES];
    [[self rdv_tabBarController] setTabBarHidden:YES animated:YES];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self makeData];
    self.title = @"基本信息";
    self.view.backgroundColor = [MyController colorWithHexString:@"f3f3f3"];
    [self createTableView];
}

- (void)makeData {
    self.dataSourceArr0 = [[NSMutableArray alloc] init];
    
    BaseInfo0Model* model0 = [[BaseInfo0Model alloc] init];
    model0._headImage = @"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1508241175487&di=f9548ffb2a0e53d6a73cf057821c1d67&imgtype=0&src=http%3A%2F%2Fimg5.duitang.com%2Fuploads%2Fitem%2F201201%2F18%2F20120118193858_BMAnV.thumb.700_0.jpg";
    [self.dataSourceArr0 addObject:model0];
    
    self.dataSourceArr1 = [[NSMutableArray alloc] init];
    
    NSArray* leftA = [NSArray arrayWithObjects:@"",@"姓名",@"性别",@"籍贯",@"常住地址",@"所属社区", nil];
    NSArray* leftR = [NSArray arrayWithObjects:@"",@"皮卡丘",@"男",@"山东省黄岛区",@"江山南路",@"城发大厦", nil];
    
    for (int i = 0; i < leftA.count; i++) {
        BaseInfo1Model* model1 = [[BaseInfo1Model alloc] init];
        model1._leftText = leftA[i];
        model1._rightText = leftR[i];
        [self.dataSourceArr1 addObject:model1];
    }
    
}

#pragma mark - 初始化tableView
- (void)createTableView{
    self.automaticallyAdjustsScrollViewInsets = NO;
    _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, [MyController isIOS7], [MyController getScreenWidth], [MyController getScreenHeight] - [MyController isIOS7]) style:UITableViewStylePlain];
    _tableView.dataSource = self;
    _tableView.delegate = self;
    _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    _tableView.showsVerticalScrollIndicator = NO;
    [self.view addSubview:_tableView];
}

#pragma mark - tableView行数
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.dataSourceArr1.count;
}

#pragma mark - 自定义tableView
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (0 == indexPath.section) {
        BaseInfo0TableViewCell *celll = [[BaseInfo0TableViewCell alloc] init];
        celll.selectionStyle = UITableViewCellSelectionStyleNone;
        BaseInfo0Model* model = self.dataSourceArr0[indexPath.row];
        [celll configCellWithModel:model];
        return celll;
    }
    
    BaseInfo1TableViewCell *celll = [[BaseInfo1TableViewCell alloc] init];
    celll.selectionStyle = UITableViewCellSelectionStyleNone;
    BaseInfo1Model* model = self.dataSourceArr1[indexPath.section];
    celll.BaseInfo1TableViewCellDelegate = self;
    celll.section = indexPath.section;
    [celll configCellWithModel:model];
    return celll;
    

    return nil;
}

#pragma mark - tableView行高
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (0 == indexPath.section) {
        BaseInfo0Model *model = nil;
        if (indexPath.row < self.dataSourceArr0.count) {
            model = [self.dataSourceArr0 objectAtIndex:indexPath.row];
        }
        
        return [BaseInfo0TableViewCell hyb_heightForIndexPath:indexPath config:^(UITableViewCell *sourceCell) {
            BaseInfo0TableViewCell *cell = (BaseInfo0TableViewCell *)sourceCell;
            [cell configCellWithModel:model];
        }];
    }
    BaseInfo1Model *model = nil;
    if (indexPath.row < self.dataSourceArr1.count) {
        model = [self.dataSourceArr1 objectAtIndex:indexPath.section];
    }
    
    return [BaseInfo1TableViewCell hyb_heightForIndexPath:indexPath config:^(UITableViewCell *sourceCell) {
        BaseInfo1TableViewCell *cell = (BaseInfo1TableViewCell *)sourceCell;
        [cell configCellWithModel:model];
    }];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (0 == indexPath.section) {
        NSLog(@"换头像");
    }
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
 #pragma mark - Navigation
 
 // In a storyboard-based application, you will often want to do a little preparation before navigation
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
 // Get the new view controller using [segue destinationViewController].
 // Pass the selected object to the new view controller.
 }
 */

@end
